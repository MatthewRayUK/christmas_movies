{% extends "base.html" %}
{% block content %}
<div class="container pt-5">
    <h2 class="text-center pt-3 text-success">Search Results</h2>

    <div class="row">
        {% for x in data["results"] %}
        <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
            <div class="card border-secondary h-100 d-flex flex-column">
                <!-- Card Body -->
                <div class="card-body text-center">
                    <!-- Movie Title -->
                    <h3 class="card-title mt-2 text-truncate" title="{{ x.title|e }}" style="font-size: 1.25rem;">
                        {{ x.title }}
                    </h3>

                    <!-- Streaming Logos -->
                    <div class="d-flex justify-content-center flex-wrap py-2">
                        <img src="static/icons/netflix.png"
                             class="img-fluid mx-1"
                             style="width: 40px; opacity: {{ 1 if x.is_netflix else 0.125 }};">
                        <img src="static/icons/prime.png"
                             class="img-fluid mx-1"
                             style="width: 40px; opacity: {{ 1 if x.is_prime else 0.125 }};">
                        <img src="static/icons/nowtv.png"
                             class="img-fluid mx-1"
                             style="width: 40px; opacity: {{ 1 if x.is_nowtv else 0.125 }};">
                        <img src="static/icons/disney.png"
                             class="img-fluid mx-1"
                             style="width: 40px; opacity: {{ 1 if x.is_disney else 0.125 }};">
                        <img src="static/icons/apple.png"
                             class="img-fluid mx-1"
                             style="width: 40px; opacity: {{ 1 if x.is_apple else 0.125 }};">
                    </div>

                    <!-- Movie Poster -->
                    {% if x['poster_path'] %}
                    <img src="https://image.tmdb.org/t/p/original{{ x['poster_path'] }}"
                         alt="{{ x['original_title']|e }} Poster"
                         class="img-fluid my-2"
                         style="max-width: 45%; height: auto;">
                    {% else %}
                    <p class="text-muted">No poster available</p>
                    {% endif %}
                </div>

                <!-- Card Footer -->
                <div class="mt-auto text-center pb-3">
                    <a href="{{ url_for('add_movie', movie_id=x['id']) }}" class="btn btn-sm btn-outline-secondary ms-2">
                        Select Movie
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
